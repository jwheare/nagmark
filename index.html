<html>
<body>
    <script>
    function getCookie (name) {
        var namekey = name + "=";
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length;i++) {
            var c = cookies[i];
            while (c.charAt(0) == ' ') {
                c = c.substring(1, c.length);
            }
            if (c.indexOf(namekey) === 0) {
                return c.substring(namekey.length, c.length);
            }
        }
        return null;
    }
    
    var MAX = 5;
    
    // file:///Users/james/Desktop/nag.html?http://google.com
    
    var url = window.location.search.substring(1);
    var key = encodeURIComponent(url);
    
    var value = getCookie(key);
    var visits = 0;
    var expires = new Date();
    
    if (value) {
        valueParts = value.split("|");
        visits = valueParts[0];
        expires.setTime(valueParts[1]);
    } else {
        expires.setTime(expires.getTime() + (24*60*60*1000));
    }
    
    var newVisits = (visits - 0) + 1;
    if (newVisits > MAX) {
        if (!confirm("Youâ€™ve visited " + url + " " + visits + " times in the last 24 hours, are you sure you want to do it again?")) {
            window.history.back();
        }
    }
    
    var newValue = newVisits + "|" + expires.getTime();
    var newCookie = key + "=" + newValue
        + "; expires=" + expires.toGMTString()
        + "; path=" + window.location.pathname;
    document.cookie = newCookie;
    window.location = url;
    </script>
    </pre>
</body>
</html>